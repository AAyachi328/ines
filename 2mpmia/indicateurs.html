<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ã‰tendue â€¢ Quartiles â€¢ Ã‰cart-type â€” DÃ©finitions + exemple (Ã©ditable)</title>
  <style>
    :root{--b:#ddd;--bg:#f7f7f7}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.5;margin:24px;max-width:980px}
    h1{font-size:1.6rem;margin:0 0 12px}
    h2{font-size:1.2rem;margin:22px 0 8px}
    h3{margin:0 0 8px}
    .card{border:1px solid var(--b);border-radius:12px;padding:14px 16px;margin:12px 0}
    .k{display:inline-block;padding:2px 8px;border-radius:999px;background:#f2f2f2;font-size:.9rem}
    pre, code{background:var(--bg);border-radius:10px;padding:10px;display:block;overflow:auto}
    ul{margin:8px 0 0 20px}
    table{border-collapse:collapse;width:100%;margin-top:10px}
    th,td{border:1px solid var(--b);padding:8px;text-align:left;vertical-align:top}
    th{background:#fafafa}
    .mini{font-size:.95rem;color:#333}
    .note{font-size:.92rem;color:#444}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width: 820px){ .grid{grid-template-columns:1.2fr .8fr;} }
    label{display:block;font-weight:600;margin:0 0 6px}
    input[type="text"]{width:100%;padding:10px 12px;border:1px solid var(--b);border-radius:10px;font-size:1rem}
    .btn{border:1px solid var(--b);background:white;border-radius:10px;padding:10px 12px;font-weight:600;cursor:pointer}
    .btn:active{transform:translateY(1px)}
    .err{color:#b00020;font-weight:600}
    .ok{color:#0a7a0a;font-weight:600}
    .pill{display:inline-block;padding:2px 10px;border-radius:999px;background:#eef6ff;border:1px solid #cfe6ff;font-size:.9rem}
  </style>
</head>
<body>

  <h1>ğŸ“Œ Ã‰tendue â€¢ Quartiles â€¢ Ã‰cart-type â€” dÃ©finitions + intuition + exemple (Ã©ditable)</h1>

  <!-- =======================
       âœ… ZONE Ã€ Ã‰DITER
       Modifie seulement ici :
       - la sÃ©rie de nombres
       - (optionnel) la mÃ©thode des quartiles
       ======================= -->

  <div class="card">
    <div class="grid">
      <div>
        <span class="k">DonnÃ©es Ã  Ã©diter</span>
        <p class="mini">
          Ã‰cris ta sÃ©rie (nombres sÃ©parÃ©s par des virgules ou des espaces).
          Exemple : <code style="display:inline;padding:2px 6px">2, 4, 5, 7, 9, 12, 15</code>
        </p>

        <label for="dataInput">SÃ©rie :</label>
        <input id="dataInput" type="text" value="2, 4, 5, 7, 9, 12, 15" />

        <p class="mini">
          MÃ©thode de quartiles (courante en collÃ¨ge/lycÃ©e en France) :
          <span class="pill">Q1 au rang âŒˆn/4âŒ‰</span> et <span class="pill">Q3 au rang âŒˆ3n/4âŒ‰</span>.
        </p>

        <button class="btn" id="btnUpdate">Mettre Ã  jour</button>
        <span id="status" class="mini"></span>
      </div>

      <div>
        <span class="k">Rappel ultra-court</span>
        <ul class="mini">
          <li><strong>Ã‰tendue</strong> : max âˆ’ min</li>
          <li><strong>Quartiles</strong> : 25% (Q1), 50% (mÃ©diane), 75% (Q3)</li>
          <li><strong>Ã‰cart-type</strong> : dispersion autour de la moyenne</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- DEFINITIONS -->
  <h2>1) DÃ©finitions (Ã  apprendre)</h2>

  <div class="card">
    <h3>ğŸ“ Ã‰tendue</h3>
    <p><strong>DÃ©finition :</strong> lâ€™Ã©tendue dâ€™une sÃ©rie statistique est la diffÃ©rence entre la valeur maximale et la valeur minimale.</p>
    <pre>Ã‰tendue = max âˆ’ min</pre>
    <p class="note">â¡ï¸ Donne â€œla largeur totaleâ€ des valeurs, sans dÃ©crire la rÃ©partition interne.</p>
  </div>

  <div class="card">
    <h3>ğŸ“Š Quartiles</h3>
    <p><strong>DÃ©finition :</strong> les quartiles dÃ©coupent une sÃ©rie ordonnÃ©e en 4 parts.</p>
    <ul>
      <li><strong>Q1</strong> : valeur en dessous de laquelle se trouvent <strong>au moins 25%</strong> des donnÃ©es.</li>
      <li><strong>Q2</strong> (= mÃ©diane) : valeur en dessous de laquelle se trouvent <strong>50%</strong> des donnÃ©es.</li>
      <li><strong>Q3</strong> : valeur en dessous de laquelle se trouvent <strong>au moins 75%</strong> des donnÃ©es.</li>
    </ul>
    <p class="note">â¡ï¸ Sert Ã  dÃ©crire la <strong>rÃ©partition</strong> et Ã  construire une <strong>boÃ®te Ã  moustaches</strong>.</p>
  </div>

  <div class="card">
    <h3>ğŸ“ Ã‰cart-type</h3>
    <p><strong>DÃ©finition intuitive :</strong> lâ€™Ã©cart-type mesure lâ€™Ã©cart â€œtypiqueâ€ des valeurs par rapport Ã  la moyenne.</p>
    <ul>
      <li><strong>Petit</strong> Ã©cart-type â†’ valeurs proches de la moyenne.</li>
      <li><strong>Grand</strong> Ã©cart-type â†’ valeurs trÃ¨s dispersÃ©es.</li>
    </ul>
    <p class="note">â¡ï¸ Contrairement Ã  lâ€™Ã©tendue, lâ€™Ã©cart-type tient compte de <strong>toutes</strong> les valeurs.</p>
  </div>

  <!-- EXEMPLE AUTO -->
  <h2>2) Exemple (calculÃ© automatiquement)</h2>

  <div class="card">
    <p><strong>SÃ©rie (ordonnÃ©e) :</strong></p>
    <pre id="sortedSeries">â€”</pre>

    <h4>âœ… Ã‰tendue</h4>
    <pre id="rangeBlock">â€”</pre>

    <h4>âœ… Quartiles (rangs âŒˆn/4âŒ‰ et âŒˆ3n/4âŒ‰)</h4>
    <div id="quartileBlock" class="mini">â€”</div>

    <h4>âœ… Moyenne & Ã©cart-type</h4>
    <pre id="sdBlock">â€”</pre>
    <p class="note">
      Remarque : ici on affiche lâ€™Ã©cart-type â€œpopulationâ€ (division par n). En cours, parfois on utilise une autre convention selon le niveau.
    </p>
  </div>

  <!-- COMPARAISON -->
  <h2>3) Intuition (table)</h2>
  <div class="card">
    <table>
      <thead>
        <tr>
          <th>Indicateur</th>
          <th>Question Ã  se poser</th>
          <th>Image mentale</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Ã‰tendue</strong></td>
          <td>â€œEntre le plus petit et le plus grand, Ã§a va jusquâ€™oÃ¹ ?â€</td>
          <td>La largeur totale</td>
        </tr>
        <tr>
          <td><strong>Quartiles</strong></td>
          <td>â€œOÃ¹ se trouvent 25%, 50%, 75% des valeurs ?â€</td>
          <td>On coupe en 4 zones</td>
        </tr>
        <tr>
          <td><strong>Ã‰cart-type</strong></td>
          <td>â€œLes valeurs sont-elles proches de la moyenne ?â€</td>
          <td>SerrÃ©es vs Ã©parpillÃ©es</td>
        </tr>
      </tbody>
    </table>
  </div>

  <script>
    // ===== Helpers =====
    function parseNumbers(str){
      // accepte virgules, espaces, points-virgules
      const cleaned = str
        .replace(/\s+/g, " ")
        .replace(/;/g, ",")
        .trim();

      if(!cleaned) return [];

      const parts = cleaned.split(/[,\s]+/).filter(Boolean);
      const nums = parts.map(p => Number(String(p).replace(",", ".")));
      if(nums.some(n => Number.isNaN(n))) return null;
      return nums;
    }

    function ceilDiv(a,b){ return Math.ceil(a/b); }

    function formatList(arr){
      return arr.map(x => Number.isInteger(x) ? String(x) : String(+x.toFixed(4))).join(" ; ");
    }

    function mean(arr){
      return arr.reduce((s,x)=>s+x,0)/arr.length;
    }

    // Ã‰cart-type "population" (division par n)
    function stdDevPopulation(arr){
      const m = mean(arr);
      const v = arr.reduce((s,x)=>s+(x-m)*(x-m),0)/arr.length;
      return Math.sqrt(v);
    }

    // Quartiles au sens "rangs âŒˆn/4âŒ‰, âŒˆ3n/4âŒ‰" sur sÃ©rie ordonnÃ©e
    function quartilesFR(sorted){
      const n = sorted.length;
      const r1 = ceilDiv(n,4);
      const r3 = ceilDiv(3*n,4);
      const q1 = sorted[r1-1];
      const q3 = sorted[r3-1];

      let median;
      if(n%2===1){
        median = sorted[(n-1)/2];
      }else{
        median = (sorted[n/2 - 1] + sorted[n/2]) / 2;
      }

      return {n, r1, r3, q1, q3, median};
    }

    function update(){
      const input = document.getElementById("dataInput").value;
      const status = document.getElementById("status");

      const nums = parseNumbers(input);

      if(nums === null){
        status.className = "mini err";
        status.textContent = "âŒ Erreur : vÃ©rifie quâ€™il nâ€™y a que des nombres.";
        return;
      }

      if(nums.length < 2){
        status.className = "mini err";
        status.textContent = "âŒ Mets au moins 2 valeurs.";
        return;
      }

      const sorted = [...nums].sort((a,b)=>a-b);
      const min = sorted[0];
      const max = sorted[sorted.length-1];
      const range = max - min;

      const q = quartilesFR(sorted);
      const m = mean(sorted);
      const sd = stdDevPopulation(sorted);

      // Affichages
      document.getElementById("sortedSeries").textContent = formatList(sorted);

      document.getElementById("rangeBlock").textContent =
        `min = ${min}\nmax = ${max}\nÃ‰tendue = max âˆ’ min = ${max} âˆ’ ${min} = ${Number.isInteger(range) ? range : +range.toFixed(4)}`;

      document.getElementById("quartileBlock").innerHTML =
        `<ul>
          <li>Effectif n = <strong>${q.n}</strong></li>
          <li>Rang de Q1 : âŒˆn/4âŒ‰ = âŒˆ${q.n}/4âŒ‰ = <strong>${q.r1}</strong> â†’ Q1 = <strong>${q.q1}</strong></li>
          <li>MÃ©diane (Q2) : <strong>${q.median}</strong></li>
          <li>Rang de Q3 : âŒˆ3n/4âŒ‰ = âŒˆ${3*q.n}/4âŒ‰ = <strong>${q.r3}</strong> â†’ Q3 = <strong>${q.q3}</strong></li>
        </ul>`;

      document.getElementById("sdBlock").textContent =
        `Moyenne â‰ˆ ${+m.toFixed(4)}\nÃ‰cart-type (population) â‰ˆ ${+sd.toFixed(4)}\n(Plus lâ€™Ã©cart-type est grand, plus les valeurs sont dispersÃ©es.)`;

      status.className = "mini ok";
      status.textContent = "âœ… Mis Ã  jour.";
    }

    document.getElementById("btnUpdate").addEventListener("click", update);
    // Mise Ã  jour automatique au chargement
    update();
  </script>

</body>
</html>
